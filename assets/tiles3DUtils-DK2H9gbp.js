import{a2 as E,a1 as S,gw as M,dB as g,gx as $,cd as m,gy as A,gz as I,ci as V,gA as U,gB as k,gC as z,cc as _,gD as l,r as R}from"./index-zfTcqrFg.js";function w(n,f){if(!Array.isArray(n)||n.length<f)return!1;for(const c of n)if(typeof c!="number")return!1;return!0}const v=7645211,W={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},G=new Map([[5773,new R({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new R({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new R({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new R({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new R({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new R({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]]);function C(n){if(!n)return null;const f=n.vcsWkid||n.latestVcsWkid;return f?G.get(f):null}function L(n){return!(!(n.extensions?.ESRI_crs?.wkid||n.extensions?.ESRI_crs?.latestWkid||n.extensions?.ESRI_crs?.wkt)||!n.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!n.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function X(n,f=!1){let c=new E({wkid:4326,vcsWkid:115700}),o=n.root?.boundingVolume,b=!1,d=n?.root?.transform;if(f&&(n.extensions?.ESRI_crs?.wkid||n.extensions?.ESRI_crs?.latestWkid||n.extensions?.ESRI_crs?.wkt)&&(n.root?.extensions?.ESRI_crs?.boundingVolume?.box||n.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))c=new E(n.extensions?.ESRI_crs),o=n.root?.extensions?.ESRI_crs?.boundingVolume,d=n.root?.transform,b=!0;else if(!o)return new S(-180,-90,180,90,c);if(o.box){const t=o?.box;if(t[3]>v&&t[7]>v&&t[11]>v)return new S({...W,spatialReference:c})}const p=_();if(!b&&o.region&&w(o.region,6)){const t=o.region,a=M(t[0]),i=M(t[1]),r=t[4],s=M(t[2]),e=M(t[3]),h=t[5];return new S({xmin:a,ymin:i,zmin:r,xmax:s,ymax:e,zmax:h,spatialReference:c})}if(o.sphere&&w(o.sphere,4)){const t=o.sphere,a=g(t[0],t[1],t[2]),i=t[3]/Math.sqrt(3),r=_();$(r,a,g(i,i,i));const s=_();if(m(s,a,g(i,i,i)),d&&w(d,16)){const x=d;A(p,r,x),I(r,p),A(p,s,x),I(s,p)}b||(V(r,U,0,r,E.WGS84,0),V(s,U,0,s,E.WGS84,0));const e=_(),h=_();return k(e,r,s),z(h,r,s),new S({xmin:e[0],ymin:e[1],zmin:e[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:c})}if(o.box&&w(o.box,12)){const t=o.box,a=g(t[0],t[1],t[2]),i=g(t[3],t[4],t[5]),r=g(t[6],t[7],t[8]),s=g(t[9],t[10],t[11]),e=[];for(let u=0;u<8;++u)e.push(_());if(m(e[0],a,i),m(e[0],e[0],r),m(e[0],e[0],s),l(e[1],a,i),m(e[1],e[1],r),m(e[1],e[1],s),m(e[2],a,i),l(e[2],e[2],r),m(e[2],e[2],s),l(e[3],a,i),l(e[3],e[3],r),m(e[3],e[3],s),m(e[4],a,i),m(e[4],e[4],r),l(e[4],e[4],s),l(e[5],a,i),m(e[5],e[5],r),l(e[5],e[5],s),m(e[6],a,i),l(e[6],e[6],r),l(e[6],e[6],s),l(e[7],a,i),l(e[7],e[7],r),l(e[7],e[7],s),d&&w(d,16)){const u=d;for(let y=0;y<8;++y)A(e[y],e[y],u)}const h=g(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),x=g(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let u=0;u<8;++u)b||V(e[u],U,0,e[u],E.WGS84,0),k(x,x,e[u]),z(h,h,e[u]);return new S({xmin:x[0],ymin:x[1],zmin:x[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:c})}return new S(-180,-90,180,90,c)}export{X as E,L as R,C as _};
